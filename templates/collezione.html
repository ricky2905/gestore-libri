<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>{{ collezione['nome'] }} - Libri</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <h1>üìö Libri nella collezione: "{{ collezione['nome'] }}"</h1>

        <!-- Pulsante per tornare alla home -->
        <a href="{{ url_for('index') }}" class="back-button">üè† Torna alla Home</a>

        <!-- Sezione Ricerca -->
        <form method="get" class="search-bar">
            <input type="text" name="q" placeholder="Cerca titolo o autore..." value="{{ search or '' }}">
            <button type="submit">üîç Cerca</button>
        </form>

        <!-- Elenco Libri -->
        {% if libri %}
            <ul class="libri-lista">
                {% for libro in libri %}
                    <li>
                        <strong>{{ libro['titolo'] }}</strong> di {{ libro['autore'] }} ({{ libro['anno'] or 'Anno sconosciuto' }})
                        <div class="azioni">
                            <!-- Modifica -->
                            <form action="{{ url_for('modifica_libro', libro_id=libro['id']) }}" method="post" class="inline-form">
                                <input type="text" name="titolo" value="{{ libro['titolo'] }}" required>
                                <input type="text" name="autore" value="{{ libro['autore'] }}" required>
                                <input type="number" name="anno" value="{{ libro['anno'] or '' }}">
                                <button type="submit">‚úèÔ∏è Modifica</button>
                            </form>

                            <!-- Elimina -->
                            <form action="{{ url_for('elimina_libro', libro_id=libro['id']) }}" method="post" class="inline-form">
                                <button type="submit" onclick="return confirm('Sei sicuro di voler eliminare questo libro?')">üóëÔ∏è Elimina</button>
                            </form>
                        </div>
                    </li>
                {% endfor %}
            </ul>
        {% else %}
            <p>Nessun libro trovato in questa collezione.</p>
        {% endif %}

        <hr>

        <!-- Aggiungi Nuovo Libro -->
        <h2>‚ûï Aggiungi un nuovo libro</h2>
        <form method="post" action="{{ url_for('aggiungi_libro', collezione_id=collezione['id']) }}">
            <input type="text" name="titolo" placeholder="Titolo" required>
            <input type="text" name="autore" placeholder="Autore" required>
            <input type="number" name="anno" placeholder="Anno">
            <button type="submit">üì• Aggiungi libro</button>
        </form>
    </div>
</body>
</html>

